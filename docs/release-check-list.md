# Pre-release

Check working tree is up to date and clean:

    git checkout -b prepare-release

Update .ts files:

    ninja -C $BDIR lupdate
    git add src/translations
    git commit -m "Update translations"

Update version (version can't include any "rc" suffix: CMake does not like them):

    read VERSION
    sed -i "s/^    VERSION .*/    VERSION $VERSION/" CMakeLists.txt

Update CHANGELOG.md:

    vi CHANGELOG.md

Commit and push

    git add .
    git commit -m "Prepare release of $VERSION"
    git push -u origin prepare-release
    gh pr create --fill
    gh pr merge --auto -dm

Tag pre-release

    git checkout master
    git pull
    git tag -a "$VERSION" -m "Release $VERSION"
    git push origin $VERSION

Smoke test binary packages generated by CI

Ask translators to update their translations

# Release

Check working tree is up to date and clean:

    rlt-updateworkbranch

Update CHANGELOG.md:

    r!rlt-changelog

Bump version number in CMakeLists.txt

Commit and push

    git add .
    git commit
    git push

Smoke test binary packages generated by CI

- Test welcome text is OK
- Test screenshot matches
- Test translations are complete

Merge dev in master:

    git checkout master
    git pull
    git merge --no-ff origin/dev

Create tag:

    rlt-tag

Push:

    git push
    git push --tags

Publish generated packages on GitHub

# Spread

Write blog post
